<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Git Collage Workshop</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header>
    <h1>ðŸŽ¨ Git Collage Workshop</h1>
    <p id="count">Loading...</p>
  </header>

  <main id="grid" class="grid"></main>

  <template id="card">
    <figure class="card">
      <img alt="" loading="lazy" />
      <figcaption>
        <div class="caption"></div>
        <div class="meta"></div>
      </figcaption>
    </figure>
  </template>

  <script>
    async function load() {
      const res = await fetch('./gallery.json', { cache: 'no-store' });
      const items = await res.json();
      document.getElementById('count').textContent =
        `Contributors: ${new Set(items.map(i => i.user)).size} Â· Images: ${items.length}`;

      const grid = document.getElementById('grid');
      const tpl = document.getElementById('card');

      for (const it of items) {
        const node = tpl.content.cloneNode(true);
        const img = node.querySelector('img');
        img.src = it.src;
        img.alt = it.caption || it.user || 'collage image';
        node.querySelector('.caption').textContent = it.caption || '';
        node.querySelector('.meta').textContent =
          [it.user, it.theme].filter(Boolean).join(' â€¢ ');
        grid.appendChild(node);
      }
    }
    load();
  </script>
</body>
</html>

